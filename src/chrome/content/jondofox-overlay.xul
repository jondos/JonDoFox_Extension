<?xml version="1.0"?>

<!DOCTYPE overlay SYSTEM "chrome://jondofox/locale/jondofox.dtd" >

<overlay id="jondofox-overlay"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">

  <!-- Include jondofox.js to the scope of the browser -->
  <script type="application/x-javascript" src="chrome://jondofox/content/jondofox.js" />
  
  <!-- Add listener to set the label initially -->
  <script language="JavaScript">
    try {
      window.addEventListener("load", initWindow, true); 
    } catch(e) { 
      dump("Error while adding event listener to window");
    }
  </script>

  <!-- Statusbar -->
  <statusbar id="status-bar">
    
    <!-- Indicate status in the corner --> 
    <!-- FIXME: Positioning problem (insertbefore="statusbar-updates") -->
    <statusbarpanel id="jondofox-proxy-status" position="6"
        label=""
        class="statusbarpanel-iconic-text"        
        popup="jondofox-proxy-list"
        context="jondofox-proxy-list" />
        <!-- ondblclick="toggleProxy()" / -->
    
    <!-- Include a popup menu -->
    <menupopup id="jondofox-proxy-list"> 
      <menuitem label="Anontest" oncommand="openTabAnontest();" />
      <menuitem label="&jondofox.statusbar.editCustom;" oncommand="editCustomProxy();" />
      <menuseparator />
      <menuitem label="&jondofox.statusbar.noProxy;" type="checkbox" checked="false" oncommand="setProxy('none', true);" />
      <menuseparator />      
      <menuitem label="&jondofox.statusbar.custom;" type="checkbox" checked="false" oncommand="setProxy('custom')" />
      <menuitem label="Tor" type="checkbox" checked="false" oncommand="setProxy('tor', false);" />
      <menuitem label="JonDo" type="checkbox" checked="false" oncommand="setProxy('jondo', false);" />
    </menupopup>

  </statusbar>

</overlay>
